
@{
    Layout = "_Layout2";
}
<div id="result" class="mt-3"></div>

<div class="container my-5">
    <h2 class="text-center mb-4">Register Patients</h2>

    <div class="row justify-content-center">
        <!-- 👈 centers the form -->
        <!-- Form Card -->
        <div class="col-md-5 mb-4">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    Add / Update Patient
                </div>
                <div class="card-body">
                    <!-- Added id="patientForm" -->
                    <form id="patientForm">
                        <div class="mb-3">
                            <input name="Name" class="form-control" placeholder="Patient Name" />
                        </div>
                        <div class="mb-3">
                            <input name="Age" class="form-control" placeholder="Age" />
                        </div>
                        <div class="mb-3">
                            <select name="Gender" class="form-select">
                                <option value="">Select Gender</option>
                                <option>Male</option>
                                <option>Female</option>
                                <option>Other</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <input name="PhoneNumber" class="form-control" placeholder="Phone Number" />
                        </div>
                        <div class="mb-3">
                            <input name="Email" class="form-control" placeholder="Email" />
                        </div>
                        <div class="mb-3">
                            <textarea name="Address" class="form-control" rows="2" placeholder="Address"></textarea>
                        </div>
                        <div class="mb-3">
                            <input name="Disease" class="form-control" placeholder="Disease" />
                        </div>
                        <div class="mb-3">
                            <input name="DiseaseHistory" class="form-control" placeholder="Disease History" />
                        </div>

                        <div class="d-flex justify-content-between">
                            <button type="submit" class="btn btn-success">Save Patient</button>
                            <button type="reset" class="btn btn-secondary">Clear</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $("#patientForm").submit(function (e) {
            e.preventDefault();

            // Collect form data
            const patientData = {
                Name: $("input[name='Name']").val(),
                Age: $("input[name='Age']").val(),
                Gender: $("select[name='Gender']").val(),
                PhoneNumber: $("input[name='PhoneNumber']").val(),
                Email: $("input[name='Email']").val(),
                Address: $("textarea[name='Address']").val(),
                Disease: $("input[name='Disease']").val(),
                DiseaseHistory: $("input[name='DiseaseHistory']").val()
            };

            // AJAX request
            $.ajax({
                type: "POST",
                url: '@Url.Action("AddPatient", "Home")', // <-- update your action/controller
                data: patientData,
                success: function (response) {
                    $("#patientForm")[0].reset();
                    $("#result").html('<div class="alert alert-success">Patient saved successfully!</div>');

                    setTimeout(function () {
                        $("#result").html('');
                    }, 2500);
                },
                error: function (xhr, status, error) {
                    console.log(xhr.responseText, status, error);
                    $("#result").html('<div class="alert alert-danger">Error saving patient.</div>');
                }
            });
        });
    });
</script>

<!-- Add this where you want messages to appear -->
